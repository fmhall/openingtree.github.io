(this["webpackJsonpopening-prep"]=this["webpackJsonpopening-prep"]||[]).push([[0],{115:function(e,t,a){"use strict";function n(e,t,a,r){this.message=e,this.expected=t,this.found=a,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(e,t){function a(){this.constructor=e}a.prototype=t.prototype,e.prototype=new a}(n,Error),n.buildMessage=function(e,t){var a={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){var t,a="";for(t=0;t<e.parts.length;t++)a+=e.parts[t]instanceof Array?s(e.parts[t][0])+"-"+s(e.parts[t][1]):s(e.parts[t]);return"["+(e.inverted?"^":"")+a+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}return"Expected "+function(e){var t,n,r,s=new Array(e.length);for(t=0;t<e.length;t++)s[t]=(r=e[t],a[r.type](r));if(s.sort(),s.length>0){for(t=1,n=1;t<s.length;t++)s[t-1]!==s[t]&&(s[n]=s[t],n++);s.length=n}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(e)+" but "+function(e){return e?'"'+r(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:n,parse:function(e,t){t=void 0!==t?t:{};var a,r={},s={start:be},o=be,i=function(e,t,a){return function(e,t,a,n){return{headers:(e=e||[]).reduce((function(e,t){return Object.assign(e,t)}),{}),comment:t,moves:a||[],result:n}}(e,t,a[0],a[1])},l={type:"any"},c=me('"',!1),u=/^[^"]/,h=pe(['"'],!0,!1),m=/^[1-9]/,p=pe([["1","9"]],!1,!1),d=/^[0-9]/,f=pe([["0","9"]],!1,!1),g=/^[A-Za-z0-9_\-]/,v=pe([["A","Z"],["a","z"],["0","9"],"_","-"],!1,!1),b=function(e){return e.join("")},y=me(" ",!1),C=me("\f",!1),E=me("\t",!1),w=me("\n",!1),k=me("[",!1),O=me("]",!1),A=/^[NKQRBP]/,T=pe(["N","K","Q","R","B","P"],!1,!1),M=/^[a-h]/,N=pe([["a","h"]],!1,!1),S=/^[1-8]/,F=pe([["1","8"]],!1,!1),j=me("+",!1),x=me("#",!1),L=/^[x@]/,P=pe(["x","@"],!1,!1),R=me(".",!1),B=me("1-0",!1),D=me("0-1",!1),G=me("*",!1),W=me("1/2-1/2",!1),I=me("=",!1),z=/^[QRBNK]/,_=pe(["Q","R","B","N","K"],!1,!1),U=me("$",!1),Y=me("!!",!1),Q=me("??",!1),q=me("!?",!1),J=me("?!",!1),K=me("!",!1),V=me("?",!1),Z=/^[^}]/,$=pe(["}"],!0,!1),H=me("{",!1),X=me("}",!1),ee=me("O-O-O",!1),te=me("O-O",!1),ae=function(e){return function e(t){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0;n<t.length;n++)Array.isArray(t[n])?e(t[n],a):a.push(t[n]);return a}(e).join("")},ne=function(e,t,a){return a},re=function(e,t,a,n,r){return r},se=me("(",!1),oe=me(")",!1),ie=0,le=[{line:1,column:1}],ce=0,ue=[],he=0;if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=s[t.startRule]}function me(e,t){return{type:"literal",text:e,ignoreCase:t}}function pe(e,t,a){return{type:"class",parts:e,inverted:t,ignoreCase:a}}function de(t){var a,n=le[t];if(n)return n;for(a=t-1;!le[a];)a--;for(n={line:(n=le[a]).line,column:n.column};a<t;)10===e.charCodeAt(a)?(n.line++,n.column=1):n.column++,a++;return le[t]=n,n}function fe(e,t){var a=de(e),n=de(t);return{start:{offset:e,line:a.line,column:a.column},end:{offset:t,line:n.line,column:n.column}}}function ge(e){ie<ce||(ie>ce&&(ce=ie,ue=[]),ue.push(e))}function ve(e,t,a){return new n(n.buildMessage(e,t),e,t,a)}function be(){var t,a,n,s,o,i;if(t=ie,a=[],n=ie,(s=ye())!==r){for(o=[],i=Oe();i!==r;)o.push(i),i=Oe();o!==r?n=s=[s,o]:(ie=n,n=r)}else ie=n,n=r;for(;n!==r;)if(a.push(n),n=ie,(s=ye())!==r){for(o=[],i=Oe();i!==r;)o.push(i),i=Oe();o!==r?n=s=[s,o]:(ie=n,n=r)}else ie=n,n=r;return a!==r&&(n=function(){var t,a;t=ie,he++,e.length>ie?(a=e.charAt(ie),ie++):(a=r,0===he&&ge(l));he--,a===r?t=void 0:(ie=t,t=r);return t}())!==r?(t,t=a=a.map((function(e){return e[0]}))):(ie=t,t=r),t}function ye(){var e,t,a,n,s,o,l,c;if(e=ie,(t=function(){var e,t,a;if(e=ie,t=[],(a=Ae())!==r)for(;a!==r;)t.push(a),a=Ae();else t=r;t!==r&&(e,t=t);return e=t}())===r&&(t=null),t!==r)if((a=Re())===r&&(a=null),a!==r){for(n=[],s=ke();s!==r;)n.push(s),s=ke();if(n!==r){if(s=ie,(o=We())!==r){if(l=[],(c=ke())!==r)for(;c!==r;)l.push(c),c=ke();else l=r;l!==r&&(c=je())!==r?(s,s=o=[o,c]):(ie=s,s=r)}else ie=s,s=r;if(s===r&&(s=ie,(o=je())!==r&&(s,o=function(e,t,a){return[null,a]}(0,0,o)),s=o),s!==r){for(o=[],l=ke();l!==r;)o.push(l),l=ke();o!==r?(e,e=t=i(t,a,s)):(ie=e,e=r)}else ie=e,e=r}else ie=e,e=r}else ie=e,e=r;else ie=e,e=r;return e}function Ce(){var t;return 34===e.charCodeAt(ie)?(t='"',ie++):(t=r,0===he&&ge(c)),t}function Ee(){var t,a,n,s;if(t=ie,m.test(e.charAt(ie))?(a=e.charAt(ie),ie++):(a=r,0===he&&ge(p)),a!==r){for(n=[],d.test(e.charAt(ie))?(s=e.charAt(ie),ie++):(s=r,0===he&&ge(f));s!==r;)n.push(s),d.test(e.charAt(ie))?(s=e.charAt(ie),ie++):(s=r,0===he&&ge(f));n!==r?(t,t=a=parseInt(a+n.join(""),10)):(ie=t,t=r)}else ie=t,t=r;return t}function we(){var t;return 32===e.charCodeAt(ie)?(t=" ",ie++):(t=r,0===he&&ge(y)),t===r&&(12===e.charCodeAt(ie)?(t="\f",ie++):(t=r,0===he&&ge(C)),t===r&&(9===e.charCodeAt(ie)?(t="\t",ie++):(t=r,0===he&&ge(E)))),t}function ke(){var e;return(e=we())===r&&(e=Oe()),e}function Oe(){var t;return 10===e.charCodeAt(ie)?(t="\n",ie++):(t=r,0===he&&ge(w)),t}function Ae(){var t,a,n,s,o,i,l,c;if(t=ie,91===e.charCodeAt(ie)?(a="[",ie++):(a=r,0===he&&ge(k)),a!==r)if((n=function(){var t,a,n;if(t=ie,a=[],g.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===he&&ge(v)),n!==r)for(;n!==r;)a.push(n),g.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===he&&ge(v));else a=r;return a!==r&&(t,a=b(a)),t=a}())!==r){if(s=[],(o=we())!==r)for(;o!==r;)s.push(o),o=we();else s=r;if(s!==r)if((o=function(){var t,a,n;if(t=ie,Ce()!==r){for(a=[],u.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===he&&ge(h));n!==r;)a.push(n),u.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===he&&ge(h));a!==r&&(n=Ce())!==r?(t,t=a.join("")):(ie=t,t=r)}else ie=t,t=r;return t}())!==r)if(93===e.charCodeAt(ie)?(i="]",ie++):(i=r,0===he&&ge(O)),i!==r){for(l=[],c=ke();c!==r;)l.push(c),c=ke();l!==r?(t,t=a=function(e,t){var a={};return a[e]=t,a}(n,o)):(ie=t,t=r)}else ie=t,t=r;else ie=t,t=r;else ie=t,t=r}else ie=t,t=r;else ie=t,t=r;return t}function Te(){var t;return A.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=r,0===he&&ge(T)),t}function Me(){var t;return M.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=r,0===he&&ge(N)),t}function Ne(){var t;return S.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=r,0===he&&ge(F)),t}function Se(){var t;return L.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=r,0===he&&ge(P)),t}function Fe(){var t;return 46===e.charCodeAt(ie)?(t=".",ie++):(t=r,0===he&&ge(R)),t}function je(){var t;return"1-0"===e.substr(ie,3)?(t="1-0",ie+=3):(t=r,0===he&&ge(B)),t===r&&("0-1"===e.substr(ie,3)?(t="0-1",ie+=3):(t=r,0===he&&ge(D)),t===r&&(42===e.charCodeAt(ie)?(t="*",ie++):(t=r,0===he&&ge(G)),t===r&&("1/2-1/2"===e.substr(ie,7)?(t="1/2-1/2",ie+=7):(t=r,0===he&&ge(W))))),t}function xe(){var e,t,a;return e=ie,(t=Me())!==r&&(a=Ne())!==r?(e,e=t=t+a):(ie=e,e=r),e}function Le(){var t,a,n,s;return t=ie,a=ie,36===e.charCodeAt(ie)?(n="$",ie++):(n=r,0===he&&ge(U)),n!==r&&(s=Ee())!==r?a=n=[n,s]:(ie=a,a=r),a!==r&&(t,a=b(a)),t=a}function Pe(){var t;return Z.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=r,0===he&&ge($)),t}function Re(){var t,a,n,s;if(t=ie,123===e.charCodeAt(ie)?(a="{",ie++):(a=r,0===he&&ge(H)),a!==r){for(n=[],s=Pe();s!==r;)n.push(s),s=Pe();n!==r?(125===e.charCodeAt(ie)?(s="}",ie++):(s=r,0===he&&ge(X)),s!==r?(t,t=a=n.join("")):(ie=t,t=r)):(ie=t,t=r)}else ie=t,t=r;return t}function Be(){var t,a,n,s;return t=ie,a=ie,(n=Me())!==r&&(s=Se())!==r?a=n=[n,s]:(ie=a,a=r),a===r&&(a=null),a!==r&&(n=xe())!==r?((s=function(){var t,a,n;return t=ie,61===e.charCodeAt(ie)?(a="=",ie++):(a=r,0===he&&ge(I)),a!==r?(z.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===he&&ge(_)),n!==r?t=a=[a,n]:(ie=t,t=r)):(ie=t,t=r),t}())===r&&(s=null),s!==r?t=a=[a,n,s]:(ie=t,t=r)):(ie=t,t=r),t}function De(){var t,a,n,s,o,i;return t=ie,a=ie,(n=function(){var e,t,a,n;return e=ie,(t=Fe())!==r&&(a=Fe())!==r&&(n=Fe())!==r?e=t=[t,a,n]:(ie=e,e=r),e}())===r&&(n=null),n!==r?((s=function(){var t;return"O-O-O"===e.substr(ie,5)?(t="O-O-O",ie+=5):(t=r,0===he&&ge(ee)),t===r&&("O-O"===e.substr(ie,3)?(t="O-O",ie+=3):(t=r,0===he&&ge(te))),t}())===r&&(s=function(){var e,t,a,n,s;return e=ie,(t=Te())!==r?((a=Me())===r&&(a=Ne()),a!==r?((n=Se())===r&&(n=null),n!==r&&(s=xe())!==r?e=t=[t,a,n,s]:(ie=e,e=r)):(ie=e,e=r)):(ie=e,e=r),e}())===r&&(s=function(){var e,t,a,n;return e=ie,(t=Te())!==r?((a=Se())===r&&(a=null),a!==r&&(n=xe())!==r?e=t=[t,a,n]:(ie=e,e=r)):(ie=e,e=r),e}())===r&&(s=Be()),s!==r?((o=function(){var t;return 43===e.charCodeAt(ie)?(t="+",ie++):(t=r,0===he&&ge(j)),t}())===r&&(o=function(){var t;return 35===e.charCodeAt(ie)?(t="#",ie++):(t=r,0===he&&ge(x)),t}()),o===r&&(o=null),o!==r?((i=function(){var t;return"!!"===e.substr(ie,2)?(t="!!",ie+=2):(t=r,0===he&&ge(Y)),t===r&&("??"===e.substr(ie,2)?(t="??",ie+=2):(t=r,0===he&&ge(Q)),t===r&&("!?"===e.substr(ie,2)?(t="!?",ie+=2):(t=r,0===he&&ge(q)),t===r&&("?!"===e.substr(ie,2)?(t="?!",ie+=2):(t=r,0===he&&ge(J)),t===r&&(33===e.charCodeAt(ie)?(t="!",ie++):(t=r,0===he&&ge(K)),t===r&&(63===e.charCodeAt(ie)?(t="?",ie++):(t=r,0===he&&ge(V))))))),t}())===r&&(i=null),i!==r?a=n=[n,s,o,i]:(ie=a,a=r)):(ie=a,a=r)):(ie=a,a=r)):(ie=a,a=r),a!==r&&(t,a=ae(a)),t=a}function Ge(){var e,t,a,n,s,o,i,l,c,u;if(e=ie,(t=function(){var e,t,a,n,s,o;return e=ie,(t=Ee())!==r?((a=Fe())===r&&(a=null),a!==r?(n=ie,(s=Fe())!==r&&(o=Fe())!==r?n=s=[s,o]:(ie=n,n=r),n===r&&(n=null),n!==r?(e,e=t=t):(ie=e,e=r)):(ie=e,e=r)):(ie=e,e=r),e}())===r&&(t=null),t!==r){for(a=[],n=ke();n!==r;)a.push(n),n=ke();if(a!==r)if((n=De())!==r){if(s=[],o=ie,i=[],(l=ke())!==r)for(;l!==r;)i.push(l),l=ke();else i=r;for(i!==r&&(l=Le())!==r?(o,o=i=ne(0,0,l)):(ie=o,o=r);o!==r;){if(s.push(o),o=ie,i=[],(l=ke())!==r)for(;l!==r;)i.push(l),l=ke();else i=r;i!==r&&(l=Le())!==r?(o,o=i=ne(0,0,l)):(ie=o,o=r)}if(s!==r){if(o=ie,i=[],(l=ke())!==r)for(;l!==r;)i.push(l),l=ke();else i=r;if(i!==r&&(l=Re())!==r?(o,o=i=l):(ie=o,o=r),o===r&&(o=null),o!==r){if(i=[],l=ie,c=[],(u=ke())!==r)for(;u!==r;)c.push(u),u=ke();else c=r;for(c!==r&&(u=Ie())!==r?(l,l=c=re(0,0,0,0,u)):(ie=l,l=r);l!==r;){if(i.push(l),l=ie,c=[],(u=ke())!==r)for(;u!==r;)c.push(u),u=ke();else c=r;c!==r&&(u=Ie())!==r?(l,l=c=re(0,0,0,0,u)):(ie=l,l=r)}i!==r?(e,e=t=function(e,t,a,n,r){var s={};return e&&(s.move_number=e),t&&(s.move=t),a&&a.length&&(s.nags=a),n&&n.length&&(s.ravs=n),r&&(s.comment=r),s}(t,n,s,i,o)):(ie=e,e=r)}else ie=e,e=r}else ie=e,e=r}else ie=e,e=r;else ie=e,e=r}else ie=e,e=r;return e}function We(){var e,t,a,n,s,o,i,l;if(e=ie,(t=Ge())!==r){if(a=[],n=ie,s=[],(o=ke())!==r)for(;o!==r;)s.push(o),o=ke();else s=r;for(s!==r&&(o=Ge())!==r?n=s=[s,o]:(ie=n,n=r);n!==r;){if(a.push(n),n=ie,s=[],(o=ke())!==r)for(;o!==r;)s.push(o),o=ke();else s=r;s!==r&&(o=Ge())!==r?n=s=[s,o]:(ie=n,n=r)}a!==r?(e,l=a,e=t=(i=t)?[i].concat(l.map((function(e){return e[1]}))):[]):(ie=e,e=r)}else ie=e,e=r;return e}function Ie(){var t,a,n,s,o,i,l,c;if(t=ie,40===e.charCodeAt(ie)?(a="(",ie++):(a=r,0===he&&ge(se)),a!==r){for(n=[],s=ke();s!==r;)n.push(s),s=ke();if(n!==r)if((s=We())!==r){for(o=[],i=ke();i!==r;)o.push(i),i=ke();if(o!==r)if((i=je())===r&&(i=null),i!==r){for(l=[],c=ke();c!==r;)l.push(c),c=ke();l!==r?(41===e.charCodeAt(ie)?(c=")",ie++):(c=r,0===he&&ge(oe)),c!==r?(t,t=a={moves:s,result:i}):(ie=t,t=r)):(ie=t,t=r)}else ie=t,t=r;else ie=t,t=r}else ie=t,t=r;else ie=t,t=r}else ie=t,t=r;return t}if((a=o())!==r&&ie===e.length)return a;throw a!==r&&ie<e.length&&ge({type:"end"}),ve(ue,ce<e.length?e.charAt(ce):null,ce<e.length?fe(ce,ce+1):fe(ce,ce))}}},260:function(e,t,a){e.exports=a(534)},320:function(e,t){},322:function(e,t){},354:function(e,t){},355:function(e,t){},421:function(e,t){},534:function(e,t,a){"use strict";a.r(t);var n,r=a(39),s=a.n(r),o=a(18),i=a(21),l=a(40),c=a(41),u=a(52),h=a(42),m=a(0),p=a.n(m),d=a(71),f=a.n(d),g=a(239),v=a.n(g),b=(a(275),function(){function e(){Object(o.a)(this,e),this.graph=new y}return Object(i.a)(e,[{key:"clear",value:function(){this.graph=new y}},{key:"addGameResultOnFen",value:function(e,t){var a=this.graph.nodes.get(e);a||((a=new C).fen=e,this.graph.nodes.set(e,a)),a.gameResults.push(t)}},{key:"addMoveForFen",value:function(e,t,a){var n=this.graph.nodes.get(e);n||((n=new C).fen=e,this.graph.nodes.set(e,n));var r=n.playedBy,s=r.get(t.san);s||((s=new E).move=t,r.set(t.san,s));var o=0,i=0,l=0;"1-0"===a?o=1:"0-1"===a?i=1:l=1,s.count+=1,s.blackWins+=i,s.whiteWins+=o,s.draws+=l,n.playedByMax=Math.max(n.playedByMax,s.count),n.playedBy=r}},{key:"addMoveAgainstFen",value:function(e,t,a){var n=this.graph.nodes.get(e);n||((n=new C).fen=e,this.graph.nodes.set(e,n));var r=n.playedAgainst,s=r.get(t.san);s||((s=new E).move=t,r.set(t.san,s));var o=0,i=0,l=0;"1-0"===a?o=1:"0-1"===a?i=1:l=1,s.count+=1,s.blackWins+=i,s.whiteWins+=o,s.draws+=l,n.playedAgainstMax=Math.max(n.playedAgainstMax,s.count),n.playedAgainst=r}},{key:"gameResultsForFen",value:function(e){var t=this.graph.nodes.get(e);return t?t.gameResults:null}},{key:"movesForFen",value:function(e){var t=this,a=this.graph.nodes.get(e);return a?Array.from(a.playedBy.entries()).map((function(e){var n=e[1];return{orig:n.move.from,dest:n.move.to,level:t.levelFor(n.count,a.playedByMax),count:n.count,whiteWins:n.whiteWins,blackWins:n.blackWins,draws:n.draws,san:n.move.san}})):null}},{key:"movesAgainstFen",value:function(e){var t=this,a=this.graph.nodes.get(e);return a?Array.from(a.playedAgainst.entries()).map((function(e){var n=e[1];return{orig:n.move.from,dest:n.move.to,level:t.levelFor(n.count,a.playedAgainstMax),count:n.count,whiteWins:n.whiteWins,blackWins:n.blackWins,draws:n.draws,san:n.move.san}})):null}},{key:"levelFor",value:function(e,t){return t<=0||e/t>.8?2:e/t>.3?1:0}}]),e}()),y=function e(){Object(o.a)(this,e),this.nodes=new Map,this.rootNode=null},C=function e(){Object(o.a)(this,e),this.fen="",this.playedByMax=0,this.playedBy=new Map,this.playedAgainstMax=0,this.playedAgainst=new Map,this.gameResults=[],this.properties={}},E=function e(){Object(o.a)(this,e),this.fen="",this.move={},this.count=0,this.blackWins=0,this.whiteWins=0,this.draws=0},w=new b,k=a(241),O=a.n(k),A=a(53),T=function(){function e(){Object(o.a)(this,e),this.plys=[{pgn:"",fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",move:{from:"x1",to:"x2",san:""}}],this.currentIndex=0}return Object(i.a)(e,[{key:"addPly",value:function(e,t){if(!(this.currentIndex<this.plys.length-1&&this.plys[this.currentIndex+1].move.san===t.san))return this.plys=this.plys.slice(0,this.currentIndex+1),this.plys.push({pgnAsList:this.pgnAsList(t.san),fen:e,move:t}),this.currentIndex++,this.plys[this.currentIndex];this.moveForward()}},{key:"pgnAsList",value:function(e){var t,a=this.pgnListSoFar();if(t=a?Object(A.a)(a):[],this.plys.length%2!==0)t.push({moveNumber:t.length+1,whitePly:e,blackPly:""});else{var n=t[t.length-1];n.blackPly=e,t[t.length-1]=n}return t}},{key:"currentMove",value:function(){return Math.floor((this.currentIndex-1)/2)}},{key:"pgnListSoFar",value:function(){return this.plys[this.plys.length-1].pgnAsList}},{key:"fen",value:function(){return this.plys[this.currentIndex].fen}},{key:"moveForward",value:function(){return this.moveTo(this.currentIndex+1)}},{key:"moveBack",value:function(){return this.moveTo(this.currentIndex-1)}},{key:"moveTo",value:function(e){return e>=0&&e<this.plys.length&&(this.currentIndex=e),this.plys[this.currentIndex]}}]),e}(),M=a(556),N=a(557),S=a(558),F=a(243),j=a(34),x=a(32),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).openingManager=new T,a.state={currentMove:0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.fen===this.openingManager.fen()||("ab1"===e.move.from?(this.openingManager=new T,!0):(this.openingManager.addPly(e.fen,e.move),!0))}},{key:"previous",value:function(){var e=this.openingManager.moveBack();this.props.onChange(e.fen,e.move),this.setState({currentMove:this.openingManager.currentMove()})}},{key:"next",value:function(){var e=this.openingManager.moveForward();this.props.onChange(e.fen,e.move),this.setState({currentMove:this.openingManager.currentMove()})}},{key:"moveTo",value:function(e){var t=this;return function(){var a=t.openingManager.moveTo(2*e+1);t.props.onChange(a.fen,a.move),t.setState({currentMove:t.openingManager.currentMove()})}}},{key:"render",value:function(){var e=this,t=O()(this.openingManager.fen());return t&&(this.opening=t.name,this.openingCode=t.code),this.openingManager.pgnListSoFar()?p.a.createElement(M.a,null,p.a.createElement(N.a,null,p.a.createElement(S.a,{lg:"6",className:"navSection"},p.a.createElement(F.a,{color:"",className:"settingButton",onClick:this.previous.bind(this)},p.a.createElement(j.a,{icon:x.h})," prev")," "),p.a.createElement(S.a,{lg:"6",className:"navSection"},p.a.createElement(F.a,{color:"",className:"settingButton",onClick:this.next.bind(this)},"next ",p.a.createElement(j.a,{icon:x.i})))),p.a.createElement(N.a,{className:"greyText"},this.openingCode,": ",this.opening),this.openingManager.pgnListSoFar().map((function(t,a){return p.a.createElement(N.a,{key:"".concat(t.moveNumber),onClick:e.moveTo(a).bind(e),className:"navCol ".concat(e.openingManager.currentMove()===a?"selectedMove":"")},p.a.createElement(S.a,{sm:"12",className:"navMove border"},"".concat(t.moveNumber,". ").concat(t.whitePly," ").concat(t.blackPly)))}))):p.a.createElement("div",null)}}]),t}(p.a.Component),P=a(58),R=(a(280),a(559)),B=a(560),D=a(561),G=a(562),W=a(563),I=a(590),z=a(591),_=a(592),U=a(564),Y=a(588),Q=a(565),q=a(566),J=a(567),K=a(568),V=function(e){var t=Object(m.useState)(!1),a=Object(P.a)(t,2),n=a[0],r=a[1],s=Object(m.useState)(!1),o=Object(P.a)(s,2),i=o[0],l=o[1],c=function(){return l(!i)},u=function(e){return function(){window.open(e,"_blank")}};return p.a.createElement("div",null,p.a.createElement(R.a,{color:"light",light:!0,expand:"md"},p.a.createElement("img",{src:"/opening-tree-logo.png",height:"32px",width:"32px",alt:"Logo"}),p.a.createElement(B.a,{href:"/"},"\xa0OpeningTree.com"),p.a.createElement(D.a,{onClick:function(){return r(!n)}}),p.a.createElement(G.a,{isOpen:n,navbar:!0},p.a.createElement(W.a,{className:"mr-auto",navbar:!0}),p.a.createElement(I.a,{navbar:!0},p.a.createElement(z.a,{className:"bootNavColor",nav:!0,caret:!0},"More"),p.a.createElement(_.a,{right:!0},p.a.createElement(U.a,{onClick:c},"Acknowledgements"),p.a.createElement(U.a,{onClick:u("mailto:openingtreechess@gmail.com")},"Feedback"),p.a.createElement(U.a,{onClick:u("https://www.reddit.com/message/compose/?to=QuickDrawMcGraw__")},"Message me on reddit"),p.a.createElement(U.a,{divider:!0}),p.a.createElement(U.a,{onClick:u("https://lichess.org/")},"Lichess"),p.a.createElement(U.a,{onClick:u("https://www.lichess4545.com/")},"Lichess4545"),p.a.createElement(U.a,{onClick:u("https://www.chess.com")},"Chess.com"))))),p.a.createElement(Y.a,{isOpen:i,toggle:c},p.a.createElement(Q.a,{toggle:c},"Acknowledgements"),p.a.createElement(q.a,{className:"acknowledgement"},p.a.createElement(J.a,{tag:"a",href:"https://lichess.org/api",target:"_blank",action:!0},"Lichess API"),p.a.createElement(J.a,{tag:"a",href:"https://www.chess.com/club/chess-com-developer-community",target:"_blank",action:!0},"Chess.com API"),p.a.createElement(J.a,{tag:"a",href:"https://github.com/ruilisi/react-chessground",target:"_blank",action:!0},"ChessGround"),p.a.createElement(J.a,{tag:"a",href:"https://github.com/jhlywa/chess.js",target:"_blank",action:!0},"Chess.js"),p.a.createElement(J.a,{tag:"a",href:"https://github.com/niklasf/eco",target:"_blank",action:!0},"Eco"),p.a.createElement(J.a,{tag:"a",href:"https://www.freelogodesign.org",target:"_blank",action:!0},"Free logo design"),p.a.createElement(J.a,{tag:"a",href:"https://github.com/kevinludwig/pgn-parser",target:"_blank",action:!0},"PGN Parser"),p.a.createElement(J.a,{tag:"a",href:"https://www.reddit.com/r/chess",target:"_blank",action:!0},"r/chess"),p.a.createElement(J.a,{tag:"a",href:"https://www.reddit.com/r/anarchychess",target:"_blank",action:!0},"r/anarchychess")),p.a.createElement(K.a,null,p.a.createElement(F.a,{color:"secondary",onClick:c},"Done"))))},Z=a(19),$=a(114),H=a.n($),X=a(115),ee=["ultraBullet","bullet","blitz","rapid","classical","correspondence"],te=["bullet","blitz","rapid","daily"],ae=(n={},Object(Z.a)(n,"ultraBullet","Ultrabullet"),Object(Z.a)(n,"bullet","Bullet"),Object(Z.a)(n,"blitz","Blitz"),Object(Z.a)(n,"rapid","Rapid"),Object(Z.a)(n,"classical","Classical"),Object(Z.a)(n,"correspondence","Correspondence"),Object(Z.a)(n,"daily","Daily"),n);function ne(e,t,a){return("lichess"===e?ee:te).filter((function(e){return!!t[e]===a}))}var re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function se(){for(var e=[{year:2007,value:0}],t=1,a=2010,n=(new Date).getFullYear(),r=(new Date).getMonth();a<n-1;)e.push({toLongLabel:"".concat(re[11]," ").concat(a),fromLongLabel:"".concat(re[0]," ").concat(a),year:a,value:t}),a++,t++;for(var s=11;s>0;s--){var o=(r+12-s)%12,i=o<r?n:n-1;e.push({fromLongLabel:"".concat(re[o]," ").concat(i),toLongLabel:"".concat(re[o]," ").concat(i),month:o,year:i,value:t}),t++}return e.push({month:12,year:n,value:t}),e}function oe(e,t){var a=e[0],n=e[1],r=t[a],s=t[n];if(a===t.length-1&&n===t.length-1){var o=new Date;return{label:"Current month",fromMonth:o.getMonth(),frmYear:o.getYear(),fromTimeStamp:ie(o.getMonth(),o.getYear(),"min")}}if(0===a&&0===n)return{label:"Anytime"};if(0===a&&n===t.length-1)return{label:"Anytime"};if(n===t.length-1){var i=r.month?r.month:0;return{label:"Since ".concat(r.fromLongLabel),fromYear:r.year,fromMonth:i,fromTimeStamp:ie(i,r.year,"min")}}if(0===a){var l=s.month?s.month:11;return{label:"Until ".concat(s.toLongLabel),toYear:s.year,toMonth:l,toTimeStamp:ie(l,s.year,"max")}}var c=r.month?r.month:0,u=s.month?s.month:11;return{label:"From ".concat(r.fromLongLabel," to ").concat(s.toLongLabel),fromYear:r.year,fromMonth:c,fromTimeStamp:ie(c,r.year,"min"),toYear:s.year,toMonth:u,toTimeStamp:ie(u,s.year,"max")}}function ie(e,t,a){return"min"===a?new Date(t,e).getTime():new Date(t,e,function(e,t){return new Date(e,t+1,0).getDate()}(t,e)).getTime()}var le=function e(t,a,n,r,s,i){Object(o.a)(this,e);var l="",c=encodeURIComponent(t),u="?color=".concat(a),h="".concat("all"===n.rated?"":"&rated=".concat("rated"===n.rated?"true":"false")),m=oe(n.selectedTimeframe,se()),p="".concat(m.fromTimeStamp?"&since=".concat(m.fromTimeStamp):""),d="".concat(m.toTimeStamp?"&until=".concat(m.toTimeStamp):""),f=ne("lichess",n,!0),g=0===f.length||6===f.length?"":"&perfType=".concat(f.join(",")),v=H.a.get("https://lichess.org/api/games/user/"+c+u+h+g+p+d,{json:!1}).on("error",(function(e){s("failed to connect to lichess.org")})).on("response",(function(e){404===e.statusCode?s("could not find lichess user "+t):200!==e.statusCode&&s("could not load games of lichess user "+t)})).on("data",(function(e){var a=l+e.toString(),n=a.lastIndexOf("\n\n\n"),s=a.slice(0,n).trim();l=a.slice(n).trim();var o=s.split("\n\n\n").map((function(e){try{return Object(X.parse)(e)[0]}catch(t){return console.log("failed to parse pgn",e),console.log(t),null}}));r(o.filter((function(e){return!!e&&("Standard"===e.headers.Variant&&(e.headers.Black.toLowerCase()===t.toLowerCase()||e.headers.White.toLowerCase()===t.toLowerCase()))})))||v.abort()})).on("end",(function(){i()}))},ce=a(248),ue=a.n(ce),he=function e(t,a,n,r,s,i){Object(o.a)(this,e);var l=new ue.a({queue:!0}),c=0,u=function(e){if(!r(e.body.games.filter((function(e){if("chess"!==e.rules||e[a].username!==t)return!1;var r=n.rated;return!("rated"===r&&!e.rated)&&(("casual"!==r||!e.rated)&&!!n[e.time_class])})).map((function(e){try{return Object(X.parse)(e.pgn)[0]}catch(t){return console.log("failed to parse pgn",e),console.log(t),null}})).filter((function(e){return null!==e}))))for(;l.dequeue(););--c<=0&&i()},h=oe(n.selectedTimeframe,se()),m=function(e){e.archives.reverse().forEach((function(e){var a=e.split("/"),n=a[a.length-2],r=a[a.length-1];(function(e,t,a){var n=a.fromYear||1970,r=a.toYear||1e4,s=a.fromYear||0,o=a.toYear||11;return t>n&&t<r||!(t<n||t>r)&&(t===n?e>=s:t===r?e<=o:(console.log("should not happen"),!0))})(r,n,h)&&(c++,l.dispatch(l.getPlayerCompleteMonthlyArchives,u,[t,n,r]))})),0===c&&s("Could not find games for chess.com user "+t)};H()("https://api.chess.com/pub/player/".concat(t,"/games/archives"),(function(e,a,n){if(e)s("Could not connect to chess.com");else if(404===a.statusCode)s("Could not find chess.com user "+t);else if(200!==a.statusCode)s("Could not load games for chess.com user "+t);else if(a.body)try{var r=JSON.parse(a.body);m(r)}catch(o){s("Could not find games for chess.com user "+t)}}))},me=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"parsePGN",value:function(e,t,a,n,r,s,o){var i=this;this.continueProcessingGames=!0;var l=function(a){return a&&a.length?(setTimeout((function(){i.parsePGNTimed(a,n,t,0,e,r,s)}),1),i.continueProcessingGames):i.continueProcessingGames};"lichess"===a?new le(e,t,n,l,s,o):"chesscom"===a&&new he(e,t,n,l,s,o)}},{key:"parsePGNTimed",value:function(e,t,a,n,r,s,o){var i=this;if(!(n>=e.length)){var l=e[n],c=l.headers.White.toLowerCase()===r.toLowerCase()?"w":"b";if(l.moves[0]&&1===l.moves[0].move_number){var u=new f.a;l.moves.forEach((function(e){var t=u.fen(),a=u.move(e.move);if(!a)return console.log("failed to load game "+l),void o("Failed to load game");a.color===c?w.addMoveForFen(t,a,l.result):w.addMoveAgainstFen(t,a,l.result)}));var h=u.fen();w.addGameResultOnFen(h,this.gameResult(l)),this.continueProcessingGames=s(t.downloadLimit,1,w)}setTimeout((function(){i.parsePGNTimed(e,t,a,n+1,r,s,o)}),1)}}},{key:"gameResult",value:function(e){return{result:e.headers.Result,white:e.headers.White,black:e.headers.Black,url:e.headers.Link||e.headers.Site}}}]),e}(),pe=a(571),de=a(570),fe=a(594),ge=a(586),ve=a(589),be=a(535),ye=a(587),Ce=a(593),Ee=[{label:"Fast time controls",selectedTimeControls:["bullet","ultraBullet","blitz"],unselectedTimeControls:["rapid","classical","correspondence"]},{label:"Slow time controls",selectedTimeControls:["rapid","classical","correspondence"],unselectedTimeControls:["bullet","ultraBullet","blitz"]},{label:"Reasonable time controls",selectedTimeControls:["blitz","rapid","classical","correspondence"],unselectedTimeControls:["bullet","ultraBullet"]},{label:"Exclude slow time controls",selectedTimeControls:["bullet","ultraBullet","blitz","rapid"],unselectedTimeControls:["classical","correspondence"]}];function we(e,t){return t.every((function(t){return e.includes(t)}))}var ke=function(e,t){var a=ne(e,t,!0),n=ne(e,t,!1);return 0===n.length||0===a.length?"All time controls":1===a.length?ae[a[0]]:1===n.length?"All except ".concat(ae[n[0]]):2===a.length?"".concat(ae[a[0]]," and ").concat(ae[a[1]]):function(e,t){var a=Ee.filter((function(a){return we(t,a.unselectedTimeControls)&&we(e,a.selectedTimeControls)}));if(a.length)return a[0].label;return e.map((function(e){return ae[e]})).join(", ")}(a,n)};var Oe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={currentlyOpenAdvancedFilter:""},a.timeframeMarks=[{value:0,label:"Big bang"},{value:e.timeframeSteps.length-1,label:"Now"}],a.downloadLimitMarks=[{value:0,label:"0"},{value:1e4,label:"No limit"}],a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"setCurrentlyOpenAdvancedFilter",value:function(e){var t=this;return function(){t.state.currentlyOpenAdvancedFilter===e&&(e=""),t.setState({currentlyOpenAdvancedFilter:e})}}},{key:"getFilters",value:function(e){return p.a.createElement("div",null,this.subSectionComponent("Mode","all"===(r=this.props.advancedFilters.rated)?"Rated and casual":"rated"===r?"Rated only":"casual"===r?"Casual only":void 0,this.props.toggleRated),this.subSectionComponent("Time control",ke(this.props.site,this.props.advancedFilters),this.setCurrentlyOpenAdvancedFilter("timeControl").bind(this),p.a.createElement(G.a,{isOpen:"timeControl"===this.state.currentlyOpenAdvancedFilter},this.getTimeControlFilters(e,4))),this.subSectionComponent("When played",(a=this.props.advancedFilters.selectedTimeframe,n=this.props.timeframeSteps,oe(a,n).label),this.setCurrentlyOpenAdvancedFilter("whenPlayed").bind(this),p.a.createElement(G.a,{isOpen:"whenPlayed"===this.state.currentlyOpenAdvancedFilter},this.getTimeFrameFilters())),this.subSectionComponent("Download limit",(t=this.props.advancedFilters.downloadLimit)>=1e4?"No limit":"".concat(t," games"),this.setCurrentlyOpenAdvancedFilter("downloadLimit").bind(this),p.a.createElement(G.a,{isOpen:"downloadLimit"===this.state.currentlyOpenAdvancedFilter},this.getDownloadLimitFilters())));var t,a,n,r}},{key:"getDownloadLimitFilters",value:function(){return p.a.createElement(Ce.a,{className:"sliderCustom",value:this.props.advancedFilters.downloadLimit,onChange:this.props.handleDownloadLimitChange,valueLabelDisplay:"auto",valueLabelFormat:function(e){return e>=1e4?"All":e},step:100,min:0,marks:this.downloadLimitMarks,max:1e4})}},{key:"getTimeFrameFilters",value:function(){var e=this;return p.a.createElement(Ce.a,{className:"sliderCustom",value:this.props.advancedFilters.selectedTimeframe,onChange:this.props.handleTimeframeChange,valueLabelDisplay:"off",valueLabelFormat:function(t){return e.props.timeframeSteps[t].label},step:1,marks:this.timeframeMarks,min:0,max:this.props.timeframeSteps.length-1})}},{key:"getTimeControlFilters",value:function(e){var t=null,a=null,n=null,r=null;return"lichess"===e?(t=["bullet","ultraBullet"],a=["blitz","classical"],n=["rapid","correspondence"],r="4"):(t=["bullet","blitz"],n=["rapid","daily"],r="6"),p.a.createElement(ve.a,null,p.a.createElement(be.a,null,p.a.createElement(M.a,null,this.getTimeControlFilterRow(t,r,"first"),a?this.getTimeControlFilterRow(a,r,"middle"):null,this.getTimeControlFilterRow(n,r,"last"))))}},{key:"getTimeControlFilterRow",value:function(e,t,a){var n=this,r="topBottomNegativeMargin";return"first"===a?r="bottomNegativeMargin":"last"===a&&(r="topNegativeMargin"),p.a.createElement(N.a,{className:r},e.map((function(e){return p.a.createElement(S.a,{sm:t},p.a.createElement(fe.a,{className:"nomargin",control:p.a.createElement(ye.a,{checked:n.props.advancedFilters[e],color:"primary",onChange:n.props.handleTimeControlChange,name:e}),label:ae[e]}))})))}},{key:"subSectionComponent",value:function(e,t,a,n){return p.a.createElement("div",{className:"pgnloadersection"},e,": ",p.a.createElement("span",{className:"smallText"},"[",p.a.createElement("a",{href:"#",onClick:a},"change"),"]"),p.a.createElement("div",null,p.a.createElement("b",null,t)),n)}},{key:"render",value:function(){return this.getFilters(this.props.site)}}]),t}(p.a.Component),Ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={playerName:"",site:"lichess",playerColor:a.props.settings.playerColor,isAdvancedFiltersOpen:!1},a.timeframeSteps=se(),a.state.selectedTimeframe=[0,a.timeframeSteps.length-1],a.state.downloadLimit=1e4,a.state.ultraBullet=!0,a.state.bullet=!0,a.state.blitz=!0,a.state.rapid=!0,a.state.classical=!0,a.state.correspondence=!0,a.state.daily=!0,a.state.rated="all",a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggleRated",value:function(){"all"===this.state.rated?this.setState({rated:"rated"}):"rated"===this.state.rated?this.setState({rated:"casual"}):this.setState({rated:"all"})}},{key:"toggleState",value:function(e){var t=this;return function(){var a={};a[e]=!t.state[e],t.setState(a)}}},{key:"playerNameChange",value:function(e){this.setState({playerName:e.target.value})}},{key:"playerColorChange",value:function(e){var t=this;return function(){return t.setState({playerColor:e})}}},{key:"load",value:function(){this.props.clear(),this.props.onChange("playerName",this.state.playerName),this.props.onChange("playerColor",this.state.playerColor),this.setState({isAdvancedFiltersOpen:!1}),(new me).parsePGN(this.state.playerName,this.state.playerColor,this.state.site,this.advancedFilters(),this.props.notify,this.props.showError,this.stopDownloading.bind(this)),this.props.setDownloading(!0)}},{key:"stopDownloading",value:function(){this.props.setDownloading(!1)}},{key:"siteChange",value:function(e){this.setState({site:e.target.value})}},{key:"handleTimeControlChange",value:function(e){this.setState(Object(Z.a)({},e.target.name,e.target.checked))}},{key:"handleTimeframeChange",value:function(e,t){this.setState(Object(Z.a)({},"selectedTimeframe",t))}},{key:"handleDownloadLimitChange",value:function(e,t){this.setState(Object(Z.a)({},"downloadLimit",t))}},{key:"advancedFilters",value:function(){return function(e,t){var a={};return t.forEach((function(t){a[t]=e[t]})),a}(this.state,["ultraBullet","bullet","blitz","rapid","correspondence","daily","classical","rated","selectedTimeframe","downloadLimit"])}},{key:"render",value:function(){var e=this;return p.a.createElement("div",null,p.a.createElement("div",{className:"pgnloadersection"},p.a.createElement(de.a,{defaultValue:"lichess",onChange:this.siteChange.bind(this)},p.a.createElement(fe.a,{className:"sitelabel",value:"lichess",control:p.a.createElement(ge.a,{color:"primary"}),label:p.a.createElement("span",null,p.a.createElement("img",{alt:"lichess",className:"siteimage",src:"/lichesslogo.png"})," lichess.org")}),p.a.createElement(fe.a,{className:"sitelabel",value:"chesscom",control:p.a.createElement(ge.a,{color:"primary"}),label:p.a.createElement("img",{alt:"chess.com",className:"siteimage",src:"/chesscomlogo.png"})}))),p.a.createElement("div",{className:"pgnloadersection"},"Games played as:",p.a.createElement("div",null,p.a.createElement(F.a,{onClick:this.playerColorChange("white"),color:"white"===this.state.playerColor?"secondary":"link"},"White"),p.a.createElement(F.a,{onClick:this.playerColorChange("black"),color:"black"===this.state.playerColor?"secondary":"link"},"Black"))),p.a.createElement("div",{className:"pgnloadersection"},p.a.createElement("a",{href:"#",onClick:this.toggleState("isAdvancedFiltersOpen").bind(this)},"Advanced filters ",p.a.createElement(j.a,{icon:this.state.isAdvancedFiltersOpen?x.b:x.a})),p.a.createElement(G.a,{isOpen:this.state.isAdvancedFiltersOpen},p.a.createElement(pe.a,null,p.a.createElement(Oe,{site:this.state.site,toggleRated:this.toggleRated.bind(this),handleTimeControlChange:this.handleTimeControlChange.bind(this),handleTimeframeChange:this.handleTimeframeChange.bind(this),timeframeSteps:this.timeframeSteps,handleDownloadLimitChange:this.handleDownloadLimitChange.bind(this),advancedFilters:this.advancedFilters()})))),p.a.createElement("div",{className:"pgnloadersection"},p.a.createElement("input",{type:"text",onChange:this.playerNameChange.bind(this),name:"playerName",id:"playerNameTextBox",placeholder:"".concat("lichess"===this.state.site?"lichess":"chess.com"," username")}),p.a.createElement("button",{onClick:this.load.bind(this)},"Load")," "),this.props.gamesProcessed>0||this.props.isDownloading?p.a.createElement("div",null,p.a.createElement("div",{className:"pgnloadersection"},"Games Loaded: ".concat(this.props.gamesProcessed," "),this.props.isDownloading?p.a.createElement("span",{className:"stopDownloading"},"[",p.a.createElement("a",{href:"#",onClick:this.stopDownloading.bind(this)},"stop"),"]"):""),p.a.createElement("div",{onClick:function(){return e.props.switchToMovesTab()},className:"navLinkButton pgnloadersection"},p.a.createElement(j.a,{icon:x.f})," View Moves>>")):"")}}]),t}(p.a.Component),Te=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(e){var t=this;return function(){var a="white"===t.props.settings[e]?"black":"white";t.props.onChange(e,a)}}},{key:"analyse",value:function(){window.open("https://www.lichess.org/analysis/".concat(this.props.fen),"_blank")}},{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement(M.a,null,p.a.createElement(N.a,{sm:"12"},p.a.createElement(S.a,{sm:"6"},p.a.createElement(F.a,{className:"settingButton",onClick:this.toggle("orientation"),color:""},p.a.createElement("h3",null,p.a.createElement(j.a,{icon:x.g}))," Flip board")),p.a.createElement(S.a,{sm:"6"},p.a.createElement(F.a,{className:"settingButton",onClick:this.props.clear,color:""},p.a.createElement("h3",null,p.a.createElement(j.a,{icon:x.j}))," Clear games")),p.a.createElement(S.a,{sm:"6"},p.a.createElement(F.a,{className:"settingButton",onClick:this.props.reset,color:""},p.a.createElement("h3",null,p.a.createElement(j.a,{icon:x.e}))," Starting position")),p.a.createElement(S.a,{sm:"6"},p.a.createElement(F.a,{className:"settingButton",onClick:this.analyse.bind(this),color:""},p.a.createElement("h3",null,p.a.createElement(j.a,{icon:x.d}))," Computer analysis")))))}}]),t}(p.a.Component),Me=a(579),Ne=a(580),Se=a(581),Fe=a(582),je=a(5),xe=a.n(je),Le=a(577),Pe=a(572),Re=a(573),Be=a(574),De=a(575),Ge=a(576),We=a(578),Ie=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"move",value:function(e,t){var a=this;return function(){a.props.onMove(e,t)}}},{key:"launch",value:function(e){return function(){window.open(e,"_blank")}}},{key:"render",value:function(){var e=this;return this.props.settings.playerName?p.a.createElement("div",null,this.props.gameResults&&this.props.gameResults.length>0?this.resultsTable():null,this.movesTable()):p.a.createElement("div",{className:"infoMessage"},"No moves to show. Please enter a lichess or chess.com user name in the",p.a.createElement("span",{className:"navLinkButton",onClick:function(){return e.props.switchToUserTab()}}," ",p.a.createElement(j.a,{icon:x.k})," User"),' tab and click "Load"')}},{key:"resultsTable",value:function(){var e=this;return p.a.createElement(Pe.a,null,p.a.createElement(Re.a,null,this.props.gameResults.map((function(t){return p.a.createElement(Be.a,{className:"moveRow",key:"".concat(t.url),onClick:e.launch(t.url)},p.a.createElement(De.a,null,"1-0"===t.result?p.a.createElement("b",null,t.white):t.white," ",t.result," ","0-1"===t.result?p.a.createElement("b",null,t.black):t.black))}))))}},{key:"movesTable",value:function(){var e=this,t=this.props.movesToShow&&this.props.movesToShow.length>0;return p.a.createElement(Pe.a,null,t?p.a.createElement(Ge.a,null,p.a.createElement(Be.a,null,p.a.createElement(De.a,{size:"small",className:"smallCol"},p.a.createElement("b",null,"Move")),p.a.createElement(De.a,{size:"small",className:"smallCol"},p.a.createElement("b",null,"Games")),p.a.createElement(De.a,null,p.a.createElement("b",null,"Results")))):null,t?p.a.createElement(Re.a,null,this.props.movesToShow.map((function(t){return p.a.createElement(Be.a,{className:"moveRow",key:"".concat(t.orig).concat(t.dest),onClick:e.move(t.orig,t.dest)},p.a.createElement(De.a,{size:"small",className:"smallCol"},t.san),p.a.createElement(De.a,{size:"small",className:"smallCol"},t.count),p.a.createElement(De.a,null,p.a.createElement(Le.a,{className:"border",multi:!0},p.a.createElement(Le.a,{bar:!0,className:"whiteMove",value:"".concat(t.whiteWins/t.count*100)},t.whiteWins/t.count>.1?t.whiteWins:""),p.a.createElement(Le.a,{bar:!0,className:"grayMove",value:"".concat(t.draws/t.count*100)},t.draws/t.count>.1?t.draws:""),p.a.createElement(Le.a,{bar:!0,className:"blackMove",value:"".concat(t.blackWins/t.count*100)},t.blackWins/t.count>.1?t.blackWins:""))))}))):null,p.a.createElement(We.a,null,p.a.createElement(Be.a,null,t?p.a.createElement(De.a,{colSpan:"3"},"Showing moves that have been played ",this.props.turnColor===this.props.settings.playerColor?"by":"by others against"," ",p.a.createElement("b",null,this.props.settings.playerName)," in this position. ",p.a.createElement("b",null,this.props.settings.playerName)," is playing as ",p.a.createElement("b",null,this.props.settings.playerColor),"."):p.a.createElement(De.a,{colSpan:"3"},"No moves found in this position played ",this.props.turnColor===this.props.settings.playerColor?"by":"by others against"," ",p.a.createElement("b",null,this.props.settings.playerName)," in this position. ",p.a.createElement("b",null,this.props.settings.playerName)," is playing as ",p.a.createElement("b",null,this.props.settings.playerColor),"."))))}}]),t}(p.a.Component),ze=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={activeTab:"user"},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"switchToUserTab",value:function(){this.toggle("user")}},{key:"switchToMovesTab",value:function(){this.toggle("moves")}},{key:"render",value:function(){var e=this;return p.a.createElement("div",null,p.a.createElement(W.a,{tabs:!0},p.a.createElement(Me.a,null,p.a.createElement(Ne.a,{className:xe()({active:"user"===this.state.activeTab}),onClick:function(){e.toggle("user")}},p.a.createElement(j.a,{icon:x.k})," User")),p.a.createElement(Me.a,null,p.a.createElement(Ne.a,{className:xe()({active:"moves"===this.state.activeTab}),onClick:function(){e.toggle("moves")}},p.a.createElement(j.a,{icon:x.f})," Moves")),p.a.createElement(Me.a,null,p.a.createElement(Ne.a,{className:xe()({active:"settings"===this.state.activeTab}),onClick:function(){e.toggle("settings")}},p.a.createElement(j.a,{icon:x.c})," Controls"))),p.a.createElement(Se.a,{activeTab:this.state.activeTab},p.a.createElement(Fe.a,{tabId:"user"},p.a.createElement(Ae,{switchToMovesTab:this.switchToMovesTab.bind(this),clear:this.props.clear,gamesProcessed:this.props.gamesProcessed,settings:this.props.settings,onChange:this.props.settingsChange,notify:this.props.updateProcessedGames,showError:this.props.showError,setDownloading:this.props.setDownloading,isDownloading:this.props.isDownloading})),p.a.createElement(Fe.a,{tabId:"moves"},p.a.createElement(Ie,{switchToUserTab:this.switchToUserTab.bind(this),movesToShow:this.props.movesToShow,gameResults:this.props.gameResults,onMove:this.props.onMove,settings:this.props.settings,turnColor:this.props.turnColor,settingsChange:this.props.settingsChange})),p.a.createElement(Fe.a,{tabId:"settings"},p.a.createElement(N.a,null,p.a.createElement(S.a,{sm:"6"},p.a.createElement(Te,{fen:this.props.fen,settings:this.props.settings,clear:this.props.clear,reset:this.props.reset,onChange:this.props.settingsChange}))))))}}]),t}(p.a.Component);function _e(){return"w"===this.chess.turn()?"white":"black"}function Ue(){return this.state.settings.playerColor}function Ye(){return this.playerColor()===this.turnColor()?this.forBrushes:this.againstBrushes}function Qe(){var e=this,t={};return this.chess.SQUARES.forEach((function(a){var n=e.chess.moves({square:a,verbose:!0});n.length&&(t[a]=n.map((function(e){return e.to})))})),{free:!1,dests:t,color:this.turnColor()}}function qe(){return this.state.settings.orientation}function Je(e,t){var a=this.chess,n=a.move({from:e,to:t,promotion:"q"});this.setState({fen:a.fen(),lastMove:n})}function Ke(e,t){this.chess=new f.a(e),this.setState({fen:e,lastMove:t})}function Ve(e,t,a){var n=this.state.gamesProcessed+t;return this.setState({gamesProcessed:n,openingGraph:a,downloadingGames:n<e&&this.state.downloadingGames}),n<e&&this.state.downloadingGames}function Ze(e){return{orig:e.orig,dest:e.dest,brush:this.brushes()[e.level]}}function $e(){var e=this.movesToShow();if(e){var t=e.map(this.moveToShape.bind(this));return this.fillArray(t,25)}return this.fillArray([],25)}function He(){var e;return(e=this.turnColor()===this.playerColor()?this.state.openingGraph.movesForFen(this.chess.fen()):this.state.openingGraph.movesAgainstFen(this.chess.fen()))?e.sort((function(e,t){return t.count-e.count})):e}function Xe(){return this.state.openingGraph.gameResultsForFen(this.chess.fen())}function et(e,t){for(var a=e.length;a<t;a++)e.push({orig:"i"+a,dest:"i"+(a+1),brush:this.brushes()[0]});return e}function tt(){this.chess=new f.a,this.setState({fen:this.chess.fen(),lastMove:{from:"ab1",to:"ab2",san:""}})}function at(){this.state.openingGraph.clear(),this.state.gamesProcessed=0,this.reset()}function nt(e,t){var a=this.state.settings;a[e]=t,this.setState({settings:a})}function rt(e){this.setState({errorMessage:e})}function st(){this.setState({errorMessage:""})}function ot(e){this.setState({downloadingGames:e})}var it=a(585),lt=a(584),ct=function(e){function t(e){var a,n;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).chess=new f.a,(n=Object(u.a)(a)).orientation=qe,n.turnColor=_e,n.calcMovable=Qe,n.onMove=Je,n.autoShapes=$e,n.updateProcessedGames=Ve,n.settingsChange=nt,n.reset=tt,n.clear=at,n.navigateTo=Ke,n.playerColor=Ue,n.fillArray=et,n.brushes=Ye,n.moveToShape=Ze,n.movesToShow=He,n.gameResults=Xe,n.showError=rt,n.closeError=st,n.setDownloading=ot,a.state={fen:a.chess.fen(),lastMove:null,gamesProcessed:0,openingGraph:w,settings:{playerName:"",orientation:"white",playerColor:"white"},errorMessage:"",downloadingGames:!1},a.forBrushes=["paleGrey","paleGreen","green"],a.againstBrushes=["paleRed","paleRed","red"],a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.lastMove?[this.state.lastMove.from,this.state.lastMove.to]:null,t=!!this.state.errorMessage;return p.a.createElement("div",null,p.a.createElement(V,null),p.a.createElement(M.a,{className:"mainContainer"},p.a.createElement(N.a,null,p.a.createElement(S.a,{lg:"2"},p.a.createElement(L,{fen:this.state.fen,move:this.state.lastMove,onChange:this.navigateTo.bind(this)})),p.a.createElement(S.a,{lg:"6"},p.a.createElement(v.a,{width:512,height:512,n:this.state.n,orientation:this.orientation(),turnColor:this.turnColor(),movable:this.calcMovable(),lastMove:e,fen:this.state.fen,onMove:this.onMove.bind(this),drawable:{enabled:!0,visible:!0,autoShapes:this.autoShapes()},style:{margin:"auto"}})),p.a.createElement(S.a,{lg:"4"},p.a.createElement(ze,{fen:this.state.fen,gamesProcessed:this.state.gamesProcessed,updateProcessedGames:this.updateProcessedGames.bind(this),settingsChange:this.settingsChange.bind(this),settings:this.state.settings,reset:this.reset.bind(this),clear:this.clear.bind(this),movesToShow:this.movesToShow(),gameResults:this.gameResults(),onMove:this.onMove.bind(this),turnColor:this.turnColor(),showError:this.showError.bind(this),setDownloading:this.setDownloading.bind(this),isDownloading:this.state.downloadingGames})))),p.a.createElement(it.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:6e3,onClose:this.closeError.bind(this)},p.a.createElement(lt.a,{onClose:this.closeError.bind(this),severity:"warning"},this.state.errorMessage)))}}]),t}(p.a.Component);s.a.render(p.a.createElement(ct,null),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.bc4562e7.chunk.js.map